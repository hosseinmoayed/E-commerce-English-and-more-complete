{% extends 'shared/base.html' %}
{% load static%}
{% load render_partial %}
{% load thumbnail %}
{% load poll_extras %}
{% block title %}
    Home
{% endblock %}

{% block header_refrences %}
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://kit.fontawesome.com/d52dc435fb.js" crossorigin="anonymous"></script>
{% endblock %}

{% block content %}

    <!--Carousel Wrapper-->
        {% include 'store_module/includes/slider.html' %}
    <!--/.Carousel Wrapper-->
    <!--Main layout-->

    <div class="container">

      <!--Navbar-->
      <nav class="navbar navbar-expand-lg navbar-dark mdb-color lighten-3 mt-3 mb-5">

        <!-- Navbar brand -->
        {% render_partial 'store_module.views.Menu' %}


        <!-- Botton Menu -->

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
          aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collapsible content -->

        <div class="collapse navbar-collapse  search-box" id="basicExampleNav">
          <form class="form-inline">
            <div class="md-form my-0">
              <input class="form-control mr-sm-2" id="searchproducts" type="text" placeholder="Search" aria-label="Search">
            </div>
          </form>
            <a onclick="showresult()" class="btn-search"><i class="fa-solid fa-magnifying-glass"></i></a>
        </div>
        <!-- Collapsible content -->

      </nav>
      <!--/.Navbar-->

      <!--Section: Products v.3-->

        <h4>
            <strong>
                <span class="badge badge-pill success-color" id="tag-cat">{{ category.name }}</span>
            </strong>
        </h4>
        <div class="select-category">



        </div>

      <!--Section: Products v.3-->

    </div>
    <div class="container">

      <!--Navbar-->
      <nav class="navbar navbar-expand-lg navbar-dark mdb-color lighten-3 mt-3 mb-5">

        <!-- Navbar brand -->

          <span class="badge my-color mr-1" id="tag-li2">BESTSELLER</span>

        <!-- Botton Menu -->

        <!-- Collapsible content -->
        <!-- Collapsible content -->

      </nav>
      <!--/.Navbar-->

      <!--Section: Products v.3-->
        <div class="">



        </div>

      <!--Section: Products v.3-->

    </div>
  <!--Main layout-->

    <div id="carouselExampleControls2" class="carousel slide mycl" data-ride="carousel">
       <div class="carousel-inner">
      {% for group in best_seller_product %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="cards-wrapper">
              {% for product in group %}
                <div class="col-lg-3 col-md-6 mb-4">

                        <!--Card-->

                            <div class="card card-sh">

                                      <!--Card image-->
                                      <div class="view overlay">

                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                            {% thumbnail product.image '260x240' padding=True as im %}
                                                <img src="{{ im.url }}" class="card-img-top" alt="">
                                            {% endthumbnail %}
                                        </a>
                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                          <div class="mask rgba-white-slight"></div>
                                        </a>
                                      </div>
                                      <!--Card image-->

                                      <!--Card content-->
                                      <div class="card-body text-center" style="padding: 5px">
                                        <!--Category & Title-->

                                        <a href="{% url 'productdetail-page' slug=product.slug %}" class="grey-text">
                                          <h5>{{ category.name }}</h5>
                                        </a>
                                        <h5>
                                          <strong>
                                            <a href="{% url 'productdetail-page' slug=product.slug %}" class="dark-grey-text">{{ product.name }}
                                                <br>
                                                {% if product.tag %}
                                                    <span class="badge badge-pill {% if product.tag == 'NEW' %}danger-color{% elif product.tag == 'Bestseller' %}primary-color{% elif product.tag == 'Trending' %}purple{% endif %}" id="tag">{{ product.tag }}</span>
                                                {% endif %}


                                            </a>
                                          </strong>
                                        </h5>

                                        <h4 class="font-weight-bold blue-text" id="f-op">
                                          {{ product.selling_price | price_format}}$
                                        </h4>

                                      </div>
                                      <!--Card content-->

                            </div>
                            <!--Card-->

                          </div>
              {% endfor %}

          </div>
    </div>
      {% endfor %}



</div>
          <a class="carousel-control-prev" href="#carouselExampleControls2" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls2" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
</div>

    <div class="container">

      <!--Navbar-->
      <nav class="navbar navbar-expand-lg navbar-dark mdb-color lighten-3 mt-3 mb-5">

        <!-- Navbar brand -->

          <span class="badge my-color mr-1" id="tag-li2">MOST VIEWED</span>

        <!-- Botton Menu -->

        <!-- Collapsible content -->
        <!-- Collapsible content -->

      </nav>
      <!--/.Navbar-->

      <!--Section: Products v.3-->
        <div class="">



        </div>

      <!--Section: Products v.3-->

    </div>

    <div id="carouselExampleControls1" class="carousel slide mycl" data-ride="carousel">
       <div class="carousel-inner">
      {% for group in most_view %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="cards-wrapper">
              {% for product in group %}
                <div class="col-lg-3 col-md-6 mb-4">

                        <!--Card-->

                            <div class="card card-sh">

                                      <!--Card image-->
                                      <div class="view overlay">

                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                            {% thumbnail product.image '260x240' padding=True as im %}
                                                <img src="{{ im.url }}" class="card-img-top" alt="">
                                            {% endthumbnail %}
                                        </a>
                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                          <div class="mask rgba-white-slight"></div>
                                        </a>
                                      </div>
                                      <!--Card image-->

                                      <!--Card content-->
                                      <div class="card-body text-center" style="padding: 5px">
                                        <!--Category & Title-->

                                        <a href="{% url 'productdetail-page' slug=product.slug %}" class="grey-text">
                                          <h5>{{ category.name }}</h5>
                                        </a>
                                        <h5>
                                          <strong>
                                            <a href="{% url 'productdetail-page' slug=product.slug %}" class="dark-grey-text">{{ product.name }}
                                                <br>
                                                {% if product.tag %}
                                                    <span class="badge badge-pill {% if product.tag == 'NEW' %}danger-color{% elif product.tag == 'Bestseller' %}primary-color{% elif product.tag == 'Trending' %}purple{% endif %}" id="tag">{{ product.tag }}</span>
                                                {% endif %}


                                            </a>
                                          </strong>
                                        </h5>

                                        <h4 class="font-weight-bold blue-text" id="f-op">
                                          {{ product.selling_price | price_format}}$
                                        </h4>

                                      </div>
                                      <!--Card content-->

                            </div>
                            <!--Card-->

                          </div>
              {% endfor %}

          </div>
    </div>
      {% endfor %}



</div>
          <a class="carousel-control-prev" href="#carouselExampleControls1" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
</div>

    <div class="container">

      <!--Navbar-->
      <nav class="navbar navbar-expand-lg navbar-dark mdb-color lighten-3 mt-3 mb-5">

        <!-- Navbar brand -->

          <span class="badge my-color mr-1" id="tag-li2">NEW PRODUCTS</span>

        <!-- Botton Menu -->

        <!-- Collapsible content -->
        <!-- Collapsible content -->

      </nav>
      <!--/.Navbar-->

      <!--Section: Products v.3-->
        <div class="">



        </div>

      <!--Section: Products v.3-->

    </div>

    <div id="carouselExampleControls3" class="carousel slide mycl" data-ride="carousel">
       <div class="carousel-inner">
      {% for group in new_products %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="cards-wrapper">
              {% for product in group %}
                <div class="col-lg-3 col-md-6 mb-4">

                        <!--Card-->

                            <div class="card card-sh">

                                      <!--Card image-->
                                      <div class="view overlay">

                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                            {% thumbnail product.image '260x240' padding=True as im %}
                                                <img src="{{ im.url }}" class="card-img-top" alt="">
                                            {% endthumbnail %}
                                        </a>
                                        <a href="{% url 'productdetail-page' slug=product.slug %}">
                                          <div class="mask rgba-white-slight"></div>
                                        </a>
                                      </div>
                                      <!--Card image-->

                                      <!--Card content-->
                                      <div class="card-body text-center" style="padding: 5px">
                                        <!--Category & Title-->

                                        <a href="{% url 'productdetail-page' slug=product.slug %}" class="grey-text">
                                          <h5>{{ category.name }}</h5>
                                        </a>
                                        <h5>
                                          <strong>
                                            <a href="{% url 'productdetail-page' slug=product.slug %}" class="dark-grey-text">{{ product.name }}
                                                <br>
                                                {% if product.tag %}
                                                    <span class="badge badge-pill {% if product.tag == 'NEW' %}danger-color{% elif product.tag == 'Bestseller' %}primary-color{% elif product.tag == 'Trending' %}purple{% endif %}" id="tag">{{ product.tag }}</span>
                                                {% endif %}


                                            </a>
                                          </strong>
                                        </h5>

                                        <h4 class="font-weight-bold blue-text" id="f-op">
                                          {{ product.selling_price | price_format}}$
                                        </h4>

                                      </div>
                                      <!--Card content-->

                            </div>
                            <!--Card-->

                          </div>
              {% endfor %}

          </div>
    </div>
      {% endfor %}



</div>
          <a class="carousel-control-prev" href="#carouselExampleControls3" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls3" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
</div>
{% endblock %}


{% block footer_refrences %}
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script>
        var availableTags = [];
        $.get('/search/').then(response => {
            searchproduct(response.product_list)
        })

        function searchproduct(availableTags) {
            $( "#searchproducts" ).autocomplete({
              source: availableTags
            });
        }
    </script>
{% endblock %}

